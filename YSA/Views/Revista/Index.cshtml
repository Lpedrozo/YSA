@model YSA.Web.Models.ViewModels.RevistaIndexViewModel
@{
    ViewData["Title"] = "Revista de Arte y Cultura";
    var detalleUrl = Url.Action("DetalleArticulo", "Revista");
}

<style>
    /* ------------------------------------- */
    /* ESTILOS BASE Y PALETA DE COLORES SUAVES */
    /* ------------------------------------- */
    :root {
        --color-primary: #2b826b; /* Verde Suave para acentos */
        --color-secondary: #000000;
        --color-text-dark: #333333;
        --color-background: #f8f8f8;
        --color-card-background: #ffffff;
        --color-hero-bg: #e5f3f0; /* Fondo de Contenido Suave */
        --color-hero-dark: #4d9d8b; /* Fondo de Imagen Suave */
    }

    /* Estilos globales */
    .section-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--color-secondary);
        margin-bottom: 2rem;
        text-align: center;
    }

    .revista-header {
        background-color: #f5fafa; /* Fondo muy claro */
        padding: 4rem 0;
        text-align: center;
        width: 100%; /* Asegura ancho completo */
    }

    .revista-title {
        font-family: 'Georgia', serif;
        font-size: 4rem;
        font-weight: 700;
        color: var(--color-secondary);
        margin-bottom: 0.5rem;
    }

    /* Estilos de Tarjeta (Para Recientes) - Se mantienen */
    .articulo-card {
        border-radius: 0.75rem;
        border: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        overflow: hidden;
        background-color: var(--color-card-background);
        cursor: pointer;
        height: 100%;
        display: flex;
        flex-direction: column;
    }

        .articulo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

    .articulo-card-img {
        height: 200px;
        object-fit: cover;
        width: 100%;
    }

    .articulo-card .card-body {
        flex-grow: 1;
    }

    .card-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--color-primary);
        line-height: 1.2;
    }

    /* ------------------------------------- */
    /* ESTILOS HERO DE DOS COLUMNAS - AJUSTADOS + ANIMACIÓN HOVER */
    /* ------------------------------------- */
    .articulo-destacado-visual {
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
        margin-bottom: 0;
        overflow: hidden;
        min-height: 350px;
        transition: all 0.3s ease-in-out;
        cursor: pointer;
    }

        .articulo-destacado-visual:hover {
            transform: scale(1.005);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        /* Contenedor de la Fila */
        .articulo-destacado-visual .row {
            width: 100%;
            margin-left: 0;
            margin-right: 0;
            min-height: inherit;
        }

    /* COLUMNA VISUAL (Izquierda o Derecha) */
    .hero-visual-col {
        background-color: var(--color-hero-dark);
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        position: relative;
    }

    /* COLUMNA DE CONTENIDO (Texto) */
    .hero-content-col {
        background-color: var(--color-hero-bg);
        color: var(--color-text-dark);
        padding: 2.5rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }

    /* IMAGEN DENTRO DE LA COLUMNA VISUAL */
    .hero-decorative-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    .hero-title {
        font-size: 2.2rem;
        font-weight: 700;
        line-height: 1.1;
        margin-bottom: 1rem;
        color: var(--color-primary);
    }

    .hero-summary {
        font-size: 1rem;
        font-weight: 400;
        margin-bottom: 1.5rem;
    }

    /* === REGLA ELIMINADA: La alternancia ahora se maneja con la clase de Bootstrap flex-lg-row-reverse === */
    /* .articulo-destacado-visual:nth-child(even) .row { flex-direction: row-reverse; } */

    /* LAYOUT: Contenedor principal sin espacios (g-0) y sin redondeo en los bordes */
    .featured-grid {
        display: flex;
        flex-direction: column;
        gap: 0;
    }

    /* Título en la columna de contenido */
    .hero-content-col a:not(.btn) {
        text-decoration: none;
        color: inherit;
    }

        .hero-content-col a:not(.btn):hover {
            opacity: 0.8;
        }

    /* MODIFICACIÓN CLAVE PARA FORZAR ANCHO COMPLETO (responsive) */
    .container-fluid {
        /* Fuerza a tomar el ancho total del viewport */
        width: 100vw;
        position: relative;
        /* Compensa el ancho de 100vw con márgenes negativos para eliminar el scroll horizontal */
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        /* Aseguramos que los paddings de Bootstrap estén a cero, aunque ya se usa g-0 */
        padding-left: 0;
        padding-right: 0;
    }

    /* Media Queries */
    @@media (max-width: 991.98px) {
        /* Aseguramos que las columnas tomen el 100% de ancho en móvil (col-sm-12 ya lo hace, pero forzamos) */
        .hero-visual-col, .hero-content-col {
            padding: 2rem;
            min-height: 250px;
            width: 100%;
        }
        /* En móvil, la dirección siempre es la misma (imagen arriba, contenido abajo),
               por lo que no necesitamos deshacer row-reverse ya que solo se aplica en 'lg' */
        /* Ajuste clave para la imagen en móvil */
        .hero-decorative-img {
            max-width: 80%;
            height: auto;
            object-fit: contain;
            margin: auto;
        }

        .articulo-destacado-visual:hover {
            transform: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .container-fluid {
            display: block;
        }
    }

    @@media (min-width: 992px) {
        .articulo-destacado-visual {
            min-height: 400px;
        }

        .hero-title {
            font-size: 2.5rem;
        }

        .hero-content-col {
            padding: 3rem 4rem;
        }
    }
</style>

<div class="revista-header mb-5">
    <div class="container">
        <h1 class="revista-title">Revista</h1>
        <p class="revista-subtitle">Explora los artículos de nuestra academia.</p>
    </div>
</div>

@* El container-fluid ahora fuerza el ancho completo con 100vw y compensación de márgenes *@
<div class="container-fluid mb-5 pb-5">

    @if (Model.ArticulosDestacados.Any())
    {
        <div class="featured-grid mb-5">

            @* CAMBIO CLAVE: Usamos .Select((item, index) => ...) para obtener el índice y aplicar la clase flex-lg-row-reverse a los artículos pares (índice 1, 3, 5...) *@
            @foreach (var articulo in Model.ArticulosDestacados.Select((item, index) => new { Articulo = item, Index = index }))
            {
                // isEven es true para el 2do, 4to, etc. (Index 1, 3, etc.)
                var isEven = (articulo.Index + 1) % 2 == 0;

                <a href="@(detalleUrl)/@articulo.Articulo.Id" style="text-decoration: none; color: inherit;">
                    <div class="articulo-destacado-visual">
                        @* APLICACIÓN DE CLASE DE ALTERNANCIA: flex-lg-row-reverse invierte el orden en desktop si es artículo par *@
                        <div class="row g-0 @(isEven ? "flex-lg-row-reverse" : "")">

                            @* Columna de Imagen Decorativa (Ancho 4/12 en Lg, 5/12 en Md) *@
                            <div class="col-lg-4 col-md-5 col-sm-12 hero-visual-col">
                                <img src="@Url.Content(articulo.Articulo.UrlImagenPrincipal ?? "https://via.placeholder.com/400x600.png?text=Visual")"
                                     alt="@articulo.Articulo.Titulo"
                                     class="hero-decorative-img">
                            </div>

                            @* Columna de Contenido de Texto (Ancho 8/12 en Lg, 7/12 en Md) *@
                            <div class="col-lg-8 col-md-7 col-sm-12 hero-content-col">

                                <p class="text-uppercase mb-2" style="font-weight: 500; opacity: 0.8;">
                                    <span class="badge rounded-pill" style="background-color: var(--color-primary); color: white;">@articulo.Articulo.Categoria</span>
                                </p>

                                <h3 class="hero-title">@articulo.Articulo.Titulo</h3>

                                <p class="hero-summary d-none d-md-block">@articulo.Articulo.Resumen</p>

                                @* Botón/Enlace de Leer Más *@
                                <span class="btn btn-light rounded-pill mt-3" style="width: fit-content; color: var(--color-primary); border: 1px solid var(--color-primary);">
                                    Leer Artículo
                                </span>

                                <small class="mt-3" style="color: rgba(43, 130, 107, 0.7);">
                                    Publicado el @articulo.Articulo.FechaPublicacion.ToString("dd MMMM yyyy")
                                </small>

                            </div>
                        </div>
                    </div>
                </a>
            }
        </div>
        <hr class="my-5" />
    }

    <h2 class="section-title">Más artículos</h2>

    @if (Model.ArticulosRecientes.Any())
    {
        @* La sección de recientes sigue centrada con padding de container por defecto *@
        <div class="container">
            <div class="row g-4">
                @foreach (var articulo in Model.ArticulosRecientes)
                {
                    <div class="col-lg-3 col-md-6 col-sm-12">
                        <a href="@(detalleUrl)/@articulo.Id" style="text-decoration: none; color: inherit;">
                            <div class="card articulo-card">
                                <img src="@Url.Content(articulo.UrlImagenPrincipal ?? "https://via.placeholder.com/600x400.png?text=Articulo")" class="articulo-card-img" alt="@articulo.Titulo">
                                <div class="card-body">
                                    <span class="badge rounded-pill" style="background-color: var(--color-primary); color: white;">@articulo.Categoria</span>
                                    <h5 class="card-title mt-2" style="font-size:1.1rem;">@articulo.Titulo</h5>
                                    @{
                                        var resumenCorto = articulo.Resumen?.Substring(0, Math.Min(articulo.Resumen.Length, 100)) + ((articulo.Resumen?.Length > 100) ? "..." : "");
                                    }
                                    <p class="card-text" style="font-size:0.9rem; color:#888;">@resumenCorto</p>
                                    <small class="text-muted">@articulo.FechaPublicacion.ToString("dd MMM yyyy")</small>
                                </div>
                            </div>
                        </a>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-info text-center mt-5" role="alert">
            <p>¡Estamos preparando nuevo contenido! Vuelve pronto.</p>
        </div>
    }

</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
}