@model List<YSA.Web.Models.ViewModels.CursoViewModel>
@{
    ViewData["Title"] = "Mis Cursos";

    // Contador de cursos
    var totalCursos = Model?.Count ?? 0;
}

<div class="container px-0 py-5">
    <!-- Header de Mis Cursos -->
    <div class="miscursos-header">
        <h1 class="miscursos-titulo">Mis Cursos</h1>
        <p class="miscursos-subtitulo">
            Revisa tu progreso y continúa aprendiendo con los cursos en los que te has inscrito
        </p>
        <span class="miscursos-contador">
            <i class="fas fa-graduation-cap me-2"></i>
            @totalCursos curso@(totalCursos != 1 ? "s" : "")
        </span>
    </div>

    @if (Model == null || !Model.Any())
    {
        <!-- Estado vacío -->
        <div class="miscursos-vacio">
            <div class="miscursos-vacio-icono">
                <i class="fas fa-book-open"></i>
            </div>
            <h2 class="miscursos-vacio-titulo">Aún no tienes cursos</h2>
            <p class="miscursos-vacio-texto">
                Explora nuestro catálogo de cursos y encuentra el perfecto para ti.
                Una vez que te inscribas, aparecerán aquí para que puedas continuar aprendiendo.
            </p>
            <a asp-controller="Curso" asp-action="Index" class="miscursos-vacio-boton">
                <i class="fas fa-search me-1"></i>
                Explorar cursos
            </a>
        </div>
    }
    else
    {
        <!-- Grid de cursos -->
        <div class="row g-4">
            @foreach (var curso in Model)
            {
                <div class="col-lg-4 col-md-6">
                    <div class="miscursos-tarjeta">
                        <!-- Imagen del curso -->
                        <div class="overflow-hidden">
                            @if (!string.IsNullOrEmpty(curso.UrlImagen))
                            {
                                <img src="@curso.UrlImagen" class="miscursos-tarjeta-imagen" alt="@curso.Titulo">
                            }
                            else
                            {
                                <img src="https://via.placeholder.com/400x200/F7F7F7/333333?text=Sin+Imagen"
                                     class="miscursos-tarjeta-imagen"
                                     alt="Imagen de marcador de posición">
                            }
                        </div>

                        <!-- Contenido del curso -->
                        <div class="miscursos-tarjeta-body">

                            <h3 class="miscursos-tarjeta-titulo">@curso.Titulo</h3>

                            <div class="miscursos-tarjeta-descripcion">
                                @Html.Raw(curso.DescripcionCorta)
                            </div>
                        </div>

                        <!-- Botón para acceder al curso -->
                        <div class="p-3 pt-0">
                            <a asp-controller="Curso"
                               asp-action="VerCurso"
                               asp-route-id="@curso.Id"
                               class="miscursos-tarjeta-boton">
                                <i class="fas fa-play me-1"></i>
                                <span>Ver curso</span>
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Sugerencia de más cursos -->
        @if (totalCursos > 0 && totalCursos <= 3)
        {
            <div class="text-center mt-5 pt-4 border-top">
                <h3 class="h4 mb-3">¿Buscas más cursos?</h3>
                <p class="text-muted mb-4">
                    Continúa tu aprendizaje explorando nuestro catálogo completo de cursos.
                </p>
                <a asp-controller="Curso" asp-action="Index" class="btn btn-outline-primary">
                    <i class="fas fa-search me-1"></i>
                    Explorar más cursos
                </a>
            </div>
        }
    }
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animación suave para las barras de progreso
            const progressBars = document.querySelectorAll('.progreso-completado');

            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0';

                setTimeout(() => {
                    bar.style.transition = 'width 1s ease-out';
                    bar.style.width = width;
                }, 100);
            });

            // Efecto hover mejorado para tarjetas
            const cards = document.querySelectorAll('.miscursos-tarjeta');

            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transition = 'all 0.3s ease';
                });

                card.addEventListener('mouseleave', function() {
                    this.style.transition = 'all 0.3s ease';
                });
            });
        });
    </script>
}