@model List<YSA.Web.Models.ViewModels.CursoViewModel>

@{
    var totalCursos = Model?.Count ?? 0;
}

<div class="mobile-aprendizaje-container p-2">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-2 px-1">
        <h6 class="mb-0 fw-bold small">Mi Aprendizaje</h6>
        @if (totalCursos > 0)
        {
            <span class="badge bg-primary rounded-pill" style="font-size: 0.7rem;">@totalCursos cursos</span>
        }
    </div>

    @if (Model != null && Model.Any())
    {
        <div class="cursos-lista-mobile" style="max-height: 300px; overflow-y: auto;">
            @foreach (var curso in Model.Take(3))
            {
                <a class="d-flex align-items-center p-2 mb-2 rounded text-decoration-none"
                   asp-controller="Curso" asp-action="VerCurso" asp-route-id="@curso.Id"
                   style="background-color: #f8f9fa; color: inherit;">

                    <!-- Imagen del curso -->
                    <div class="me-2 flex-shrink-0">
                        <img src="@curso.UrlImagen" alt="@curso.Titulo"
                             style="width: 40px; height: 40px; object-fit: cover; border-radius: 6px;"
                             onerror="this.src='/diseño/logoYSA.png'">
                    </div>

                    <!-- Información del curso -->
                    <div class="flex-grow-1" style="min-width: 0;">
                        <div class="small fw-bold text-truncate">@curso.Titulo</div>
                        <small class="text-muted">
                            <i class="fas fa-play-circle text-success me-1" style="font-size: 0.6rem;"></i>
                            Continuar
                        </small>
                    </div>

                    <!-- Flecha -->
                    <i class="fas fa-chevron-right text-muted ms-1" style="font-size: 0.7rem;"></i>
                </a>
            }
        </div>

        @if (totalCursos > 3)
        {
            <div class="text-center mt-1 mb-2">
                <small class="text-muted">+ @(totalCursos - 3) cursos más</small>
            </div>
        }

        <!-- Botón "Ver todos" -->
        <a href="/Curso/MisCursos" class="btn btn-primary btn-sm w-100 mt-1" style="font-size: 0.8rem;">
            <i class="fas fa-graduation-cap me-1"></i>Ir a mi aprendizaje
        </a>
    }
    else
    {
        <!-- Estado vacío -->
        <div class="text-center py-3">
            <i class="fas fa-book-open text-muted mb-2" style="font-size: 2rem;"></i>
            <p class="small text-muted mb-2">Aún no tienes cursos</p>
            <a asp-controller="Curso" asp-action="Index" class="btn btn-primary btn-sm" style="font-size: 0.8rem;">
                <i class="fas fa-search me-1"></i>Explorar
            </a>
        </div>
    }
</div>