@using Microsoft.AspNetCore.Identity
@using YSA.Core.Entities

@inject SignInManager<Usuario> SignInManager
@inject UserManager<Usuario> UserManager
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"] - YoSoyArte</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/YSA.styles.css" asp-append-version="true" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<style>

		.main-header {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			background-color: black;
			padding: 1.0rem 1.5rem; /* Alto inicial */
			display: flex;
			justify-content: space-between; /* Distribuye espacio entre los elementos */
			align-items: center;
			z-index: 1040;
			transition: all 0.3s ease-in-out;
		}

			.main-header.scroll-header-shrink {
				padding: 0.5rem 1rem; /* Alto al hacer scroll (un poco más pequeño) */
				background-color: rgba(0, 0, 0, 0.9); /* Más opaco para mejor legibilidad */
				backdrop-filter: blur(5px);
			}

		/* Estilos del Logo Central */
		.header-logo {
			font-size: 2rem; /* Un poco más grande para destacar */
			font-weight: bold;
			color: white;
			text-decoration: none;
			transition: font-size 0.3s ease-in-out;
		}

		.main-header.scroll-header-shrink .header-logo {
			font-size: 1.5rem; /* Se encoge al hacer scroll */
		}

		/* Estilos de los enlaces de navegación */
		.header-nav-link {
			font-size: 1rem;
			padding-left: 10px !important;
			padding-right: 10px !important;
			transition: color 0.3s ease, background-color 0.3s ease;
		}

			/* Hover para los enlaces principales (Cursos, Revista, Mi Aprendizaje, etc.) */
			.header-nav-link:hover {
				color: #3498db !important; /* El color azul vibrante */
				/* Opcional: puedes agregar un ligero cambio de fondo si quieres que destaque más */
				/* background-color: rgba(255, 255, 255, 0.1); */
			}

		/* --- ESTILOS DE MENÚS DESPLEGABLES --- */

		/* 1. Menú "Mi Cuenta" (clase Bootstrap: dropdown-menu-dark) */
		.dropdown-menu-dark {
			background-color: black;
			border: 1px solid rgba(255, 255, 255, 0.1);
		}

			.dropdown-menu-dark .dropdown-item {
				color: white;
			}

				/* Hover para los elementos del menú "Mi Cuenta" */
				.dropdown-menu-dark .dropdown-item:hover,
				.dropdown-menu-dark .dropdown-item:focus {
					background-color: #2c3e50; /* Un gris oscuro, menos agresivo que el negro */
					color: #3498db; /* El azul para destacar el texto */
				}

		/* 2. Menú "Mi Aprendizaje" (ID personalizado) */
		#miAprendizajeDropdown + div.dropdown-menu {
			right: 0;
			left: auto;
			min-width: 300px;
			padding: 0.5rem;
			/* Fondo oscuro para que se parezca al header */
			background-color: #2c3e50; /* Gris oscuro para diferenciar un poco del negro puro */
			border: 1px solid rgba(255, 255, 255, 0.1);
		}

			/* Estilo para los items del curso dentro del dropdown */
			#miAprendizajeDropdown + div.dropdown-menu .dropdown-item {
				padding: 0.5rem 1rem;
				color: white; /* Texto blanco en el menú oscuro */
				border-radius: 5px; /* Bordes suaves para cada curso */
				margin-bottom: 5px;
			}

				/* Hover para cada curso dentro de "Mi Aprendizaje" */
				#miAprendizajeDropdown + div.dropdown-menu .dropdown-item:hover {
					background-color: #3498db; /* Un hover llamativo de color azul */
					color: white; /* Asegura que el texto permanezca blanco */
				}

			/* Asegurar el estilo del texto pequeño y el botón */
			#miAprendizajeDropdown + div.dropdown-menu small {
				color: #bdc3c7 !important; /* Un gris claro para el texto secundario */
			}

			/* Estilo para el botón "Ir a Mi aprendizaje" */
			#miAprendizajeDropdown + div.dropdown-menu .btn-primary {
				background-color: #3498db !important; /* Azul primario */
				border-color: #3498db !important;
				color: white !important; /* Texto blanco */
				font-weight: bold;
			}


		/* Espacio para que el contenido no quede detrás del header */
		body {
			padding-top: 5rem; /* Ajusta este valor si el header es más grande */
		}

		.footer {
			padding-top: 2rem;
			padding-bottom: 2rem;
			background-color: black !important;
			color: white !important;
		}

		.social-icons-footer a {
			color: white; /* Iconos blancos */
			font-size: 1.5rem;
			margin: 0 0.75rem;
			transition: color 0.3s ease;
		}

			.social-icons-footer a:hover {
				color: #3498db; /* Un color de acento, el azul vibrante que ya tienes en el header, para el hover */
			}

		.content-footer-spacer {
			padding-bottom: 100px !important; /* Puedes cambiar 100px por el valor que necesites (ej: 120px, 150px) */
		}

		.whatsapp-float {
			position: fixed;
			width: 60px;
			height: 60px;
			bottom: 40px; /* Separación del fondo */
			right: 40px; /* Separación de la derecha */
			background-color: #25d366; /* Color verde de WhatsApp */
			color: #FFF;
			border-radius: 50px;
			text-align: center;
			font-size: 30px;
			box-shadow: 2px 2px 3px #999;
			z-index: 1050; /* Alto z-index para que esté sobre todo el contenido */
			display: flex;
			align-items: center;
			justify-content: center;
			transition: transform 0.3s ease-in-out;
			color: #FFF; /* Color del icono */
		}

			.whatsapp-float:hover {
				color: #FFF;
				transform: scale(1.1); /* Efecto para que resalte al pasar el mouse */
			}

		/* Ajuste para móviles (opcional) */
		@@media (max-width: 768px) {
			.whatsapp-float {
				width: 50px;
				height: 50px;
				bottom: 20px;
				right: 20px;
				font-size: 25px;
			}
		}
	</style>
</head>

<body>
	<header class="main-header navbar navbar-expand-lg">
		<div class="container-fluid">
			<div class="d-flex order-0">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link text-white header-nav-link" asp-controller="Curso" asp-action="Index"><i class="fas fa-book-open me-2"></i>Cursos</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white header-nav-link" asp-controller="Revista" asp-action="Index"><i class="fas fa-newspaper me-2"></i>Revista</a>
					</li>
					<li class="nav-item">
						<a class="nav-link text-white header-nav-link" asp-controller="Producto" asp-action="Index"><i class="fas fa-file-pdf me-2"></i>PDFs</a>
					</li>
				</ul>
			</div>

			<a class="header-logo order-1 mx-auto" asp-controller="Home" asp-action="Index">YSA</a>

			<div class="d-flex order-2">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">

					@if (SignInManager.IsSignedIn(User))
					{
						<li class="nav-item dropdown">
							<a class="nav-link text-white header-nav-link" href="#" id="miAprendizajeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="fas fa-graduation-cap me-2"></i>Mi Aprendizaje
							</a>
							@await Component.InvokeAsync("CursosUsuario")
						</li>

						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle text-white header-nav-link" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="fas fa-user-circle me-2"></i>Mi Cuenta
							</a>
							<ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" asp-controller="Cuenta" asp-action="MiPerfil">Mi Perfil</a></li>
								@if (User.IsInRole("Administrador"))
								{
									<li><a class="dropdown-item" asp-controller="Admin" asp-action="Panel">Panel Admin</a></li>
								}
								@if (User.IsInRole("Artista"))
								{
									<li><a class="dropdown-item" asp-controller="Artista" asp-action="GestionarPortafolio">Mi Portafolio</a></li>
								}
								<li><hr class="dropdown-divider"></li>
								<li><a class="dropdown-item" href="#" onclick="document.getElementById('logoutForm').submit();">Cerrar Sesión</a></li>
							</ul>
						</li>
						<form asp-controller="Cuenta" asp-action="Logout" method="post" id="logoutForm" style="display: none;"></form>
					}
					else
					{
						<li class="nav-item">
							<a class="nav-link text-white header-nav-link" asp-controller="Cuenta" asp-action="Login"><i class="fas fa-sign-in-alt me-2"></i>Iniciar Sesión</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-white header-nav-link" asp-controller="Cuenta" asp-action="Registro"><i class="fas fa-user-plus me-2"></i>Registrarse</a>
						</li>
					}
				</ul>
			</div>
		</div>
	</header>

	<div class="content-footer-spacer">
		@RenderBody()
	</div>

	<footer class="border-top footer text-muted bg-black">
		<div class="container text-center">
			<div class="social-icons-footer mb-3">
				<a href="URL_TU_INSTAGRAM" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
				<a href="URL_TU_FACEBOOK" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a>
				<a href="URL_TU_TWITTER" target="_blank" title="Twitter/X"><i class="fab fa-twitter"></i></a>
				<a href="URL_TU_YOUTUBE" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
				<a href="URL_TU_PINTEREST" target="_blank" title="Pinterest"><i class="fab fa-pinterest"></i></a>
			</div>
			<p style="color:white; font-size: 0.9rem;">&copy; @DateTime.Now.Year - YoSoyArte.Web. Todos los derechos reservados.</p>
		</div>
	</footer>
	@{
		var mensaje = "Hola, me gustaría recibir asistencia sobre:.";
		var mensajeCodificado = System.Web.HttpUtility.UrlEncode(mensaje);
		var telefono = "584241544523"; // El código de país (58) + tu número sin el 0 inicial.
		var urlWhatsapp = $"https://wa.me/{telefono}?text={mensajeCodificado}";
	}
	<a href="@urlWhatsapp" class="whatsapp-float" target="_blank" title="Asistencia por WhatsApp">
		<i class="fab fa-whatsapp" style="color:#fff"></i>
	</a>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="~/js/site.js" asp-append-version="true"></script>
	<script>
		// Lógica para el header dinámico al hacer scroll
		document.addEventListener('DOMContentLoaded', () => {
			const mainHeader = document.querySelector('.main-header');
			window.addEventListener('scroll', () => {
				if (window.scrollY > 50) {
					mainHeader.classList.add('scroll-header-shrink');
				} else {
					mainHeader.classList.remove('scroll-header-shrink');
				}
			});
		});
	</script>
	@await RenderSectionAsync("Scripts", required: false)
</body>
</html>