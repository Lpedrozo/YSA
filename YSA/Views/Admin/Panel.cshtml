@model YSA.Web.Models.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Panel de administración";
}

<style>
    /* ------------------------------------- */
    /* 1. Variables B&W y Estilos Generales  */
    /* ------------------------------------- */
    :root {
        --color-secondary: #000000; /* Negro Puro (Título, Hover) */
        --color-primary: #333333; /* Gris Oscuro (Botones, Acentos) */
        --color-text-muted: #6a6a6a; /* Gris medio (Descripción) */
        --color-background-light: #f7f7f7; /* Fondo general de la página */
        --color-background-white: #ffffff; /* Fondo para las tarjetas */
        --color-border-light: #eeeeee; /* Borde sutil */
    }

    body {
        background-color: var(--color-background-light);
    }

    h1, h2 {
        color: var(--color-secondary) !important;
        font-weight: 700;
    }

    /* ------------------------------------- */
    /* 2. Tarjetas de Métricas Clave (Top)  */
    /* ------------------------------------- */
    .metric-card {
        background-color: var(--color-background-white);
        border: 1px solid var(--color-border-light);
        border-radius: 12px;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        height: 100%;
        text-decoration: none; /* Asegura que el enlace no tenga línea */
        color: inherit;
        display: flex; /* Añadir display flex para alinear contenido */
        flex-direction: column; /* Contenido en columna */
        justify-content: space-between; /* Espaciar contenido verticalmente */
    }

    /* Aplicar hover y estilo a la etiqueta <a> que ahora envuelve la tarjeta */
    .metric-link, .metric-link:hover {
        color: inherit; /* Mantener el color del texto */
        text-decoration: none; /* Quitar subrayado */
    }

    .metric-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        border-color: var(--color-primary); /* Resalta el borde al hacer hover */
    }

    .metric-value {
        font-size: 3rem;
        font-weight: 800;
        color: var(--color-secondary); /* Negro */
        line-height: 1;
    }

    .metric-label {
        font-weight: 600;
        color: var(--color-text-muted);
        text-transform: uppercase;
        font-size: 0.8rem;
    }

    .metric-icon {
        font-size: 3rem;
        color: var(--color-primary); /* Gris oscuro */
        opacity: 0.7;
    }

    /* **NUEVOS ESTILOS para el ícono de la Tasa BCV** */
    .metric-card.bcv-rate .metric-icon {
        font-size: 2.5rem; /* Un poco más pequeño para encajar mejor */
        color: var(--color-primary); /* Usar el color primario */
        opacity: 1; /* Sin opacidad para que resalte */
        align-self: flex-end; /* Alinear a la derecha-abajo si el contenido es flexible */
        margin-top: 1rem; /* Espacio para separarlo del valor */
    }


    /* Estilo especial para Pedidos Pendientes (Rojo/Negro) */
    .metric-pending .metric-value,
    .metric-pending .metric-icon {
        color: #dc3545; /* Rojo de advertencia */
    }

    .metric-pending:hover {
        border-color: #dc3545;
    }


    /* ------------------------------------- */
    /* 3. Tarjetas de Gestión Rápida (Grid)  */
    /* ------------------------------------- */
    .action-card {
        background-color: var(--color-background-white);
        border: 1px solid var(--color-border-light);
        height: 100%;
        transition: background-color 0.2s, color 0.2s, transform 0.2s;
        border-radius: 8px;
        text-decoration: none;
        color: var(--color-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    }

        .action-card:hover {
            background-color: var(--color-secondary); /* Negro Puro */
            border-color: var(--color-secondary);
            color: #ffffff;
            transform: translateY(-2px);
        }

    .action-card-icon {
        font-size: 2.8rem;
        margin-bottom: 0.5rem;
        color: var(--color-primary);
        transition: color 0.2s;
    }

    .action-card:hover .action-card-icon {
        color: #ffffff;
    }

    .action-card-title {
        font-size: 1.2rem;
        font-weight: 700;
    }

    .action-card:hover .card-text {
        color: #ddd !important; /* Texto claro en hover */
    }

    /* ------------------------------------- */
    /* 4. Centralización y Contenedor */
    /* ------------------------------------- */
    .dashboard-container {
        max-width: 1200px; /* Ancho máximo para el dashboard */
        margin: 0 auto; /* Centraliza el contenido */
    }
</style>

<div class="dashboard-container py-5 px-3 pb-5 mb-5">

    <h1 class="mb-5 mt-3">Panel de administración</h1>

    <div class="row row-cols-1 row-cols-md-4 g-4 mb-5 pb-3">

        <div class="col">
            <a href="@Url.Action("HistorialTasas", "Admin")" class="metric-link">
                <div class="card metric-card text-start p-4 bcv-rate">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            @if (Model.TasaBCV.HasValue)
                            {
                                <div class="metric-value">@Model.TasaBCV.Value.ToString("N2")</div>
                            }
                            else
                            {
                                <div class="metric-value" style="font-size: 1.5rem;">Error</div>
                            }
                            <div class="metric-label">Tasa oficial BCV (VES/USD)</div>
                        </div>
                        <i class="fas fa-money-bill-wave metric-icon"></i>
                    </div>
                </div>
            </a>
        </div>

        <div class="col">
            <div class="card metric-card text-start p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="metric-value">@Model.TotalCursos</div>
                        <div class="metric-label">Total cursos</div>
                    </div>
                    <i class="fas fa-book-open metric-icon"></i>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card metric-card text-start p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="metric-value">@Model.TotalEstudiantes</div>
                        <div class="metric-label">Estudiantes activos</div>
                    </div>
                    <i class="fas fa-users metric-icon"></i>
                </div>
            </div>
        </div>

        <div class="col">
            <a href="@Url.Action("PedidosPendientes", "Admin")" class="card metric-card metric-pending text-start p-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="metric-value">@Model.PedidosPendientes</div>
                        <div class="metric-label">Pedidos pendientes</div>
                    </div>
                    <i class="fas fa-exclamation-triangle metric-icon"></i>
                </div>
            </a>
        </div>

    </div>
    <h2 class="mb-4 pt-3">Accesos rápidos</h2>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 pb-5 mb-5">
        <div class="col">
            <a href="@Url.Action("GestionarCursos", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-graduation-cap action-card-icon"></i>
                    <div class="action-card-title">Gestionar cursos</div>
                    <p class="card-text small text-muted mt-1">Crear, editar o administrar la estructura de los cursos.</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("GestionarArtistas", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-paint-brush action-card-icon"></i>
                    <div class="action-card-title">Gestionar artistas</div>
                    <p class="card-text small text-muted mt-1">Administrar perfiles de profesores y colaboradores.</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("GestionarProductos", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-file-pdf action-card-icon"></i>
                    <div class="action-card-title">Gestionar productos digitales</div>
                    <p class="card-text small text-muted mt-1">Administrar la librería de recursos descargables (PDFs).</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("GestionarEventos", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-calendar-alt action-card-icon"></i>
                    <div class="action-card-title">Gestionar eventos</div>
                    <p class="card-text small text-muted mt-1">Crear y actualizar clases en vivo, talleres o webinars.</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("GestionarEstudiantes", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-user-friends action-card-icon"></i>
                    <div class="action-card-title">Gestionar estudiantes</div>
                    <p class="card-text small text-muted mt-1">Ver perfiles, permisos y actividad de usuarios.</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("GestionarCategorias", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-folder action-card-icon"></i>
                    <div class="action-card-title">Gestionar categorías</div>
                    <p class="card-text small text-muted mt-1">Organizar y clasificar el contenido de la plataforma (cursos, productos).</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("PedidosPendientes", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-receipt action-card-icon"></i>
                    <div class="action-card-title">Historial y pagos</div>
                    <p class="card-text small text-muted mt-1">Revisar el estado y detalle de todas las transacciones.</p>
                </div>
            </a>
        </div>
        <div class="col">
            <a href="@Url.Action("HistorialTasas", "Admin")" class="card action-card text-center p-4">
                <div class="card-body">
                    <i class="fas fa-chart-line action-card-icon"></i>
                    <div class="action-card-title">Historial de tasas</div>
                    <p class="card-text small text-muted mt-1">Ver la evolución y registros pasados de la tasa BCV.</p>
                </div>
            </a>
        </div>
    </div>
</div>